package GUI;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.Image;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;
import java.sql.ResultSet;
import java.sql.SQLException;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;

import util.Conn;

public class ExpertView {
	public ExpertView(final String n1){
		//new
		JFrame jf=new JFrame();
		JLabel jl = new JLabel();
		JButton jb = new JButton("打开pdf文件");
		JButton jb_ch = new JButton("中文版");
		JButton jb_en = new JButton("英文版");
		JButton jb_ru = new JButton("俄语版");
		JButton jb_de = new JButton("德语版");
		JButton jb_export= new JButton("导出");
		JPanel BrotherPanel01 = new JPanel();
		JPanel BrotherPanel02 = new JPanel();
		JPanel BrotherPanel03 = new JPanel();
		JScrollPane sp= new JScrollPane();
		final JTextArea ta = new JTextArea(30, 30);
		ta.setLineWrap(true);  
		JScrollPane scroll = new JScrollPane(ta);  
		
		//set
		ImageIcon imageIcon = new ImageIcon("pics/"+n1+".jpg"); // load the image to a imageIcon
		Image image = imageIcon.getImage(); // transform it 
		Image newimg = image.getScaledInstance(200, 200,  java.awt.Image.SCALE_SMOOTH); // scale it the smooth way  
		imageIcon = new ImageIcon(newimg);  // transform it back
		//查一下数据库
		Conn conn=new Conn() ;
		ResultSet rs=Conn.executeQuery("SELECT * FROM expertinfo where n1='"+n1+"'");
		try {
			rs.next();
			String intro = "";
			intro+="姓名："+rs.getString("n1")+":\n\n";
			intro+="简介："+rs.getString("n7")+"\n\n";
			intro+="联系方式：";
			ta.setText(intro);
		} catch (SQLException e1) {
			// TODO Auto-generated catch block
			e1.printStackTrace();
		}
		ta.setEditable(false);
		jb.addActionListener(new ActionListener(){

			public void actionPerformed(ActionEvent arg0) {
				// TODO Auto-generated method stub
				try {
					Runtime.getRuntime().exec("Foxit Reader/Foxit Reader.exe pdfs/"+n1+".pdf");
				} catch (IOException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		});
		jb_ch.addActionListener(new ActionListener(){

			public void actionPerformed(ActionEvent arg0) {
				// TODO Auto-generated method stub
				Conn conn=new Conn() ;
				ResultSet rs=Conn.executeQuery("SELECT * FROM expertinfo where n1='"+n1+"'");
				try {
					rs.next();
					String intro = "";
					intro+=rs.getString("n1")+":\n\n";
					intro+=rs.getString("n6");
					ta.setText(intro);
				} catch (SQLException e1) {
					// TODO Auto-generated catch block
					e1.printStackTrace();
				}
		}});
		
		jb_de.addActionListener(new ActionListener(){

			public void actionPerformed(ActionEvent arg0) {
				// TODO Auto-generated method stub
				Conn conn=new Conn() ;
				ResultSet rs=Conn.executeQuery("SELECT * FROM expertinfo where n1='"+n1+"'");
				try {
					rs.next();
					String intro = "";
					intro+=rs.getString("n1")+":\n\n";
					intro+=rs.getString("n8");
					ta.setText(intro);
				} catch (SQLException e1) {
					// TODO Auto-generated catch block
					e1.printStackTrace();
				}
		}});
		
		jb_en.addActionListener(new ActionListener(){

			public void actionPerformed(ActionEvent arg0) {
				// TODO Auto-generated method stub
				Conn conn=new Conn() ;
				ResultSet rs=Conn.executeQuery("SELECT * FROM expertinfo where n1='"+n1+"'");
				try {
					rs.next();
					String intro = "";
					intro+=rs.getString("n1")+":\n\n";
					intro+=rs.getString("n7");
					ta.setText(intro);
				} catch (SQLException e1) {
					// TODO Auto-generated catch block
					e1.printStackTrace();
				}
		}});
	
		jb_ru.addActionListener(new ActionListener(){

			public void actionPerformed(ActionEvent arg0) {
				// TODO Auto-generated method stub
				Conn conn=new Conn() ;
				ResultSet rs=Conn.executeQuery("SELECT * FROM expertinfo where n1='"+n1+"'");
				try {
					rs.next();
					String intro = "";
					intro+=rs.getString("n1")+":\n\n";
					intro+=rs.getString("n9");
					ta.setText(intro);
				} catch (SQLException e1) {
					// TODO Auto-generated catch block
					e1.printStackTrace();
				}
		}});
		
		//add-set
		jl.setIcon(imageIcon);
		BrotherPanel01.add(jl,BorderLayout.NORTH);
		BrotherPanel01.add(scroll);
		
		BrotherPanel02.add(jb_ch);
		BrotherPanel02.add(jb_en);
		BrotherPanel02.add(jb_ru);
		BrotherPanel02.add(jb_de);
		BrotherPanel02.add(jb);
		BrotherPanel02.add(jb_export);
		
		jf.setLayout(new BorderLayout());
		jf.add(BrotherPanel01, BorderLayout.NORTH);
		jf.add(BrotherPanel02, BorderLayout.SOUTH);
		jf.add(BrotherPanel01);
		jf.setSize(600, 600);
		jf.setLocation(300,200); // 设置初始的位置
		jf.setTitle("name="+n1);
		jf.setVisible(true);
		
	}
}
