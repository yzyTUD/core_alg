
#include <stdio.h>
#include <ctype.h>
char token;
char buf[ 100];
char *expr ;
int low( void);
int mid( void);
int high( void);

void match( char exp ){
                 if ( token == exp){
                                 expr++;
                                 token = *expr ;
                 }
                 else{
                                 //printf("not matching ");
                 }
}

int low( void){
                 int result = mid();
                 while (( token == '+') || (token == '-' ))
                 {
                                 if ( token == '+'){
                                                 expr++;
                                                 token = *expr ;
                                                 result += mid();
                                 }
                                 if ( token == '-'){
                                                 expr++;
                                                 token = *expr ;
                                                 result -= mid();
                                 }
                 }
                 return result ;
}

int mid( void){
                 int result = high();
                 while (( token == '*') || (token == '/' ))
                 {
                                 if ( token == '*'){
                                                 expr++;
                                                 token = *expr ;
                                                 result *= mid();
                                 }
                                 if ( token == '/'){
                                                 expr++;
                                                 token = *expr ;
                                                 result /= mid();
                                 }
                 }
                 return result ;
}

int high( void){
                 int result = 0;
                 if ( token == '('){
                                 match('(' );
                                 result = low();
                                 match(')' );
                 }
                 else if (isdigit (token)){
                                 while ( isdigit(token )) {
                                                 result = result * 10 ;
                                                 result += token - '0' ;
                                                 expr++;
                                                 token = *expr ;
                                 }
                 }
                 return result ;
}

int main( int argc , char * argv[]){

                 //FILE *p = fopen("calcdata.in","r");

                 //while(!feof(p)){
                 //fgets(buf,10,p);
                 //printf("%s=",buf);
                 //expr = buf;

                 //expr = argv[1];
                 expr = "(2+4)*3";
                 token = (char )*expr;
                 printf("%d\n" , low ());
                 //}fclose(p);

                 return 0 ;
}

